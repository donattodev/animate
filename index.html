<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Preloader Simples</title>
  <link rel="stylesheet" href="./assets/css/style.css" />
</head>

<body>
  <div id="preloader">
    <!--<div class="spinner"></div>-->
    <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="#fff"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="bot-icon">
      <!-- Antena -->
      <path class="antenna" d="M12 8V4H8" />

      <!-- Corpo -->
      <rect width="16" height="12" x="4" y="8" rx="2" />

      <!-- Lados -->
      <path d="M2 14h2" />
      <path d="M20 14h2" />

      <!-- Olhos -->
      <path class="eye" d="M15 13v2" />
      <path class="eye" d="M9 13v2" />
    </svg>
  </div>

  <div id="conteudo" style="display: none;">
    <h1>Página Carregada</h1>
    <p>Todo o conteúdo foi carregado com sucesso.</p>
  </div>

  <script>
    window.addEventListener('load', () => {
      const preloader = document.getElementById('preloader')
      const conteudo = document.getElementById('conteudo')

      const tempoMinimo = 3000
      const intervaloExibicao = 2 * 60 * 1000

      const agora = Date.now()
      const ultimaVisita = localStorage.getItem('ultimaVisita')

      const mostrarConteudo = () => {
        const tempoInicio = performance.now()

        const finalizar = () => {
          preloader.style.display = 'none'
          conteudo.style.display = 'block'
          localStorage.setItem('ultimaVisita', Date.now().toString())
        }

        const tempoAtual = performance.now()
        const tempoPassado = tempoAtual - tempoInicio

        if (tempoPassado >= tempoMinimo) {
          finalizar()
        } else {
          setTimeout(finalizar, tempoMinimo - tempoPassado)
        }
      }

      if (!ultimaVisita || agora - Number(ultimaVisita) >= intervaloExibicao) {
        mostrarConteudo()
      } else {
        preloader.style.display = 'none'
        conteudo.style.display = 'block'
      }
    })
  </script>
</body>

</html>